<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fragebogen</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        table {
            width: 100%;
        }

        th, td {
            text-align: center;
            vertical-align: middle;
        }
    </style>
</head>
<body>
<div class="container my-5">
    <h1 class="text-center mb-4">Die vier Prioritäten</h1>
    <form id="fragebogenForm">
        <table class="table">
            <thead class="thead-dark">
            <tr>
                <th scope="col">Aussage</th>
                <th scope="col">Stimmt</th>
                <th scope="col">Stört dich das?</th>
            </tr>
            </thead>
            <tbody id="tabelle-fragebogen">
            <!-- Dynamisch generiert -->
            </tbody>
        </table>
    </form>
    <div class="d-flex justify-content-center">
        <button class="btn btn-primary btn-lg mt-4 mb-4" onclick="calc()">Auswerten</button>
    </div>

    <table class="table" id="tabelle-ergebnisse" style="visibility: hidden">
        <thead>
        <tr>
            <th></th>
            <th>Überlegenheit</th>
            <th>Kontrolle</th>
            <th>Gefallen wollen</th>
            <th>Bequemlichkeit</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th>Punkte:</th>
            <td>
                <div id="punkte-u"></div>
            </td>
            <td>
                <div id="punkte-k"></div>
            </td>
            <td>
                <div id="punkte-g"></div>
            </td>
            <td>
                <div id="punkte-b"></div>
            </td>
        </tr>
        <tr>
            <th>Probleme:</th>
            <td>
                <div id="probleme-u"></div>
            </td>
            <td>
                <div id="probleme-k"></div>
            </td>
            <td>
                <div id="probleme-g"></div>
            </td>
            <td>
                <div id="probleme-b"></div>
            </td>
        </tr>

        </tbody>
    </table>
</div>

<script>
    const fragen = [
        "Ich habe Angst bedeutungslos zu sein.",
        "Ich erlebe mich oft in einem Abstand von anderen Menschen.",
        "Ich strenge mich an, damit ich von möglichst vielen akzeptiert werde.",
        "Ich lasse mir gerne helfen.",
        "Weil ich nicht eine/r unter vielen sein will, ist es mir wichtig, aus der Masse herauszuragen.",
        "Mit meinen Gefühlen bin ich ziemlich zurückhaltend, d.h. ich sage lieber was ich denke als was ich fühle.",
        "Mir geht oft die Frage durch den Kopf, ob die Leute mich wohl mögen, und ob ich willkommen bin.",
        "Unruhe, Hast, Störungen und Veränderungen können mich derart stören, dass ich mich ganz unwohl fühle.",
        "Ich spüre in mir ein Streben nach „besser sein“ als andere. Dafür strenge ich mich auch an.",
        "Ich glaube, ich kann mich nicht gut anvertrauen, nicht „fallen lassen“.",
        "Ich glaube, die Angst abgelehnt zu werden, ist bei mir sehr stark.",
        "Ich möchte in Ruhe gelassen werden.",
        "Für meine Art zu leben, zahle ich den Preis, dass ich zu viel tun und zu viel Verantwortung tragen muss.",
        "Es ist mir sehr wichtig, meiner Sache sicher zu sein.",
        "Ich wage es nicht gern, meine Meinung zu sagen, wenn sie von der der anderen abweicht.",
        "Ich stehe ungern unter Leistungsdruck.",
        "Wichtig ist für mich nicht, ob eine Sache gut läuft, sondern ob die entscheidenden Anstöße von mir kamen.",
        "Ich fürchte, dass meine spontanen Äußerungen später wieder gegen mich verwendet werden können.",
        "Ich kann nicht gut „nein“ sagen.",
        "Ich leiste vielleicht nicht ganz so viel wie andere, aber meine Ruhe und Gemütlichkeit sind mir wichtiger.",
        "Ich kann mir denken, dass manche Leute sich klein und verlegen fühlen, wenn sie sehen, was ich so aus meinem Leben mache.",
        "Halb vorbereitet in eine Situation hineinzuspringen, das liegt mir gar nicht.",
        "Ich versuche festzustellen, was andere von mir erwarten, damit ich diese Erwartung womöglich erfüllen kann.",
        "Körperliche Schmerzen, auch wenn sie nur kurz dauern, gehe ich grundsätzlich aus dem Weg.",
        "Wenn ich mein Leben so betrachte, kommt es mir vor, als ob ich gut mit Leuten umgehen kann, die mir unterlegen sind, und auch mit solchen, die ich als Autorität akzeptiere, aber Freundschaften kann ich offensichtlich nicht auf Dauer halten.",
        "Es ist mir sehr wichtig, die Übersicht zu behalten.",
        "Wenn ich den Erwartungen anderer zuwiderhandeln muss, fühle ich mich wie gelähmt und entscheidungsunfähig.",
        "Im Grunde ist mein tiefster Wunsch, ein bequemes Leben zu haben ohne viele Konflikte."
    ];

    // Tabelle generieren
    const tbody = document.getElementById("tabelle-fragebogen");
    fragen.forEach((frage, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
                <td>${frage}</td>
                <td>
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="frage${index}" id="btnradio1-frage${index}" autocomplete="off" value="1" required>
                        <label class="btn btn-outline-primary" for="btnradio1-frage${index}">Genau</label>

                        <input type="radio" class="btn-check" name="frage${index}" id="btnradio2-frage${index}" autocomplete="off" value="0.5">
                        <label class="btn btn-outline-secondary" for="btnradio2-frage${index}">Etwa</label>

                        <input type="radio" class="btn-check" name="frage${index}" id="btnradio3-frage${index}" autocomplete="off" value="0">
                        <label class="btn btn-outline-danger" for="btnradio3-frage${index}">Nicht</label>
                    </div>
                </td>
                <td>
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="problem${index}" id="btnradio1-problem${index}" autocomplete="off" value="1" required>
                        <label class="btn btn-outline-primary" for="btnradio1-problem${index}">Ja</label>

                        <input type="radio" class="btn-check" name="problem${index}" id="btnradio2-problem${index}" autocomplete="off" value="0">
                        <label class="btn btn-outline-danger" for="btnradio2-problem${index}">Nein</label>
                    </div>
                </td>
            `;

        tbody.appendChild(row);
    });

    // Auswertung
    function calc() {
        const formData = new FormData(document.getElementById("fragebogenForm"));
        
        const punkte = fragen.map((_, index) => parseFloat(formData.get(`frage${index}`)) || 0);
        let punkte_u = 0;
        let punkte_k = 0;
        let punkte_g = 0;
        let punkte_b = 0;
        for (let i = 0; i < fragen.length; ++i) {
            if (i % 4 === 0) punkte_u += punkte[i];
            else if (i % 4 === 1) punkte_k += punkte[i];
            else if (i % 4 === 2) punkte_g += punkte[i];
            else if (i % 4 === 3) punkte_b += punkte[i];
        }
        document.getElementById("punkte-u").textContent = punkte_u;
        document.getElementById("punkte-k").textContent = punkte_k;
        document.getElementById("punkte-g").textContent = punkte_g;
        document.getElementById("punkte-b").textContent = punkte_b;

        const probleme = fragen.map((_, index) => parseFloat(formData.get(`problem${index}`)) || 0);
        let probleme_u = 0;
        let probleme_k = 0;
        let probleme_g = 0;
        let probleme_b = 0;
        for (let i = 0; i < fragen.length; ++i) {
            if (i % 4 === 0) probleme_u += probleme[i];
            else if (i % 4 === 1) probleme_k += probleme[i];
            else if (i % 4 === 2) probleme_g += probleme[i];
            else if (i % 4 === 3) probleme_b += probleme[i];
        }
        document.getElementById("probleme-u").textContent = probleme_u;
        document.getElementById("probleme-k").textContent = probleme_k;
        document.getElementById("probleme-g").textContent = probleme_g;
        document.getElementById("probleme-b").textContent = probleme_b;

        document.getElementById("tabelle-ergebnisse").style.visibility = "visible";
    }
</script>
</body>
</html>

